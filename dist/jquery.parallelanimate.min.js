/*
 *  jQuery ParallelAnimate - v0.1.0-alpha
 *  parallel animation plugin for jQuery.
 *  http://xlune.com
 *
 *  Made by Xlune
 *  Under MIT License (http://xlune.mit-license.org/)
 */
(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=[].slice;!function(c,d){var e,f,g,h,i,j,k,l,m,n,o;return h="parallelAnimate",g="pa-",k=!1,j=[],l=null!=(m=null!=(n=null!=(o=d.requestAnimationFrame)?o:d.webkitRequestAnimationFrame)?n:d.mozRequestAnimationFrame)?m:function(a){d.setTimeout(a,1e3/60)},i=function(a){var b,c,d;for(c=0,d=j.length;d>c;c++)b=j[c],b(a);return l(i)},e=function(){function b(b,d){return this.element=b,this.option=a(this.option,this),this.property=a(this.property,this),this.draw=a(this.draw,this),this.reset=a(this.reset,this),this.isFinish=a(this.isFinish,this),this.inTime=a(this.inTime,this),this.init=a(this.init,this),this._options=c.extend({},this.defaults,d),this._isPlay=!1,this._firstObj={},this._lastObj={},this._fromObj={},this._toObj={},this._currentObj={},this.init(),this}return b.prototype.defaults={start:0,fromto:{},duration:0,easing:"linear",update:null,complate:null},b.prototype.init=function(){var a,b;"string"===c.type(this._options.fromto)&&(this._options.fromto=this._options.fromto.replace(/'/g,'"'),this._options.fromto=c.parseJSON(this._options.fromto));for(b in this._options.fromto)a=this._options.fromto[b],this._fromObj[b]=a[0],this._toObj[b]=a[1],this._currentObj[b]=this._fromObj[b],this._firstObj[b]=this.property(b)},b.prototype.inTime=function(a){return this._options.start<=a&&a<=this._options.start+this._options.duration},b.prototype.isFinish=function(a){return this._options.start+this._options.duration<a},b.prototype.reset=function(a){var b;null==a&&(a=0);for(b in this._firstObj)this.property(b,this._firstObj[b]);if(a>=this._options.start+this._options.duration)for(b in this._toObj)this.property(b,this._toObj[b]);this.draw(a)},b.prototype.draw=function(a){var b,c,d,e;if(this.inTime(a)){this._isPlay=!0,d=a-this._options.start,d=Math.max(Math.min(d,this._options.duration),0),e=d/this._options.duration;for(c in this._fromObj)b=this._toObj[c]-this._fromObj[c],this._currentObj[c]=b*e+this._fromObj[c],this.property(c,this._currentObj[c])}else{for(c in this._fromObj)this._currentObj[c]=this.property(c);this._isPlay=!1}},b.prototype.property=function(a,b){var c;return"undefined"==typeof b?null!=(c=parseFloat(this.element.css(a),10))?c:0:(this.element.css(a,b),void 0)},b.prototype.option=function(a,b){if(a in this.defaults){if("undefined"==typeof b)return this._options[a];this._options[a]=b}},b}(),f=function(){function b(b,d,e){this.element=b,this.cycle=a(this.cycle,this),this.update=a(this.update,this),this.draw=a(this.draw,this),this.isFinish=a(this.isFinish,this),this.reset=a(this.reset,this),this.resume=a(this.resume,this),this.pause=a(this.pause,this),this.gotoAndStop=a(this.gotoAndStop,this),this.gotoAndPlay=a(this.gotoAndPlay,this),this.stop=a(this.stop,this),this.play=a(this.play,this),this.option=a(this.option,this),this.makeAnimationItem=a(this.makeAnimationItem,this),this.makeAndAddAnimationItem=a(this.makeAndAddAnimationItem,this),this.init=a(this.init,this),this._options=c.extend({},this.defaults,e),this._name=h,this._fps=60,this._current=0,this._currentRepeat=0,this._animations=[],this._preTime=0,this._isPlay=!1,this._ctlActive=!1,this.init(d)}return b.prototype.defaults={fps:60,repeat:0},b.prototype.init=function(a){var b,d,e,f,g;if("array"===c.type(a))for(f=0,g=a.length;g>f;f++)d=a[f],this.makeAndAddAnimationItem(d);else"object"===c.type(a)?this.makeAndAddAnimationItem(a):"string"===c.type(a)&&(e=this,b=this.element.find(a),b.each(function(){return e.makeAndAddAnimationItem(c(this))}));j.push(this.cycle),k||(k=!0,l(i))},b.prototype.makeAndAddAnimationItem=function(a){var b;b=this.makeAnimationItem(a),b&&this._animations.push(b)},b.prototype.makeAnimationItem=function(a){var b,d;return b=null,d={},a instanceof c?(b=a,a.data(""+g+"start")&&(d.start=parseFloat(a.data(""+g+"start"),10)),a.data(""+g+"fromto")&&(d.fromto=a.data(""+g+"fromto")),a.data(""+g+"duration")&&(d.duration=parseFloat(a.data(""+g+"duration"),10)),a.data(""+g+"easing")&&(d.easing=a.data(""+g+"easing")),a.data(""+g+"update")&&(d.update=a.data(""+g+"update")),a.data(""+g+"complate")&&(d.complate=a.data(""+g+"complate"))):null!=(null!=a?a.el:void 0)&&(b=a.el instanceof c?a.el:this.element.find(a.el),delete a.el,d=a),b?new e(b,d):void 0},b.prototype.option=function(a,b){if(a in this.defaults){if("undefined"===c.type(b))return this._options[a];this._options[a]=b}},b.prototype.play=function(a){"undefined"!=typeof a&&this.option("repeat",a),this.reset(),this._isPlay=!0,this._ctlActive=!0},b.prototype.stop=function(){this._isPlay=!1,this._ctlActive=!1,this._currentRepeat=0,this._current=0,this.reset()},b.prototype.gotoAndPlay=function(a,b){null==a&&(a=0),"undefined"!=typeof b&&this.option("repeat",b),this.reset(a),this._isPlay=!0,this._ctlActive=!0},b.prototype.gotoAndStop=function(a){null==a&&(a=0),this.reset(a),this._isPlay=!1,this._ctlActive=!0},b.prototype.pause=function(){this._ctlActive&&(this._isPlay=!1)},b.prototype.resume=function(){this._ctlActive&&(this._isPlay=!0)},b.prototype.reset=function(a){var b,c,d,e;for(null==a&&(a=0),this._current=1e3*a,e=this._animations,c=0,d=e.length;d>c;c++)b=e[c],b.reset(a)},b.prototype.isFinish=function(){var a,b,c;return c=this._current/1e3,a=function(){var a,d,e,f;for(e=this._animations,f=[],a=0,d=e.length;d>a;a++)b=e[a],b.isFinish(c)||f.push(b);return f}.call(this),a.length<=0},b.prototype.draw=function(){var a,b,c,d,e;for(b=this._current/1e3,e=this._animations,c=0,d=e.length;d>c;c++)a=e[c],a.draw(b)},b.prototype.update=function(a){null==a&&(a=0),this._isPlay&&(this._current+=a,this.draw(),this.isFinish()&&(this._options.repeat<0?this.play():this._currentRepeat<this._options.repeat?(this._currentRepeat+=1,this.play()):(this._currentRepeat=0,this._isPlay=!1,this._ctlActive=!1)))},b.prototype.cycle=function(a){var b;b=0,null!=a?(b=a-this._preTime,this._preTime=a):(b=1e3/60,this._preTime+=b),this.update(b)},b}(),c.fn[h]=function(){var a,d,e;return a=1<=arguments.length?b.call(arguments,0):[],d="plugin_"+h,e=[],this.each(function(){var b,g;switch(c.data(this,d)||c.data(this,d,new f(c(this),a[0],a[1])),g=c.data(this,d),a[0]){case"option":if(b=g.option(a[1],a[2]),null!=b)return e.push(b);break;case"play":return g.play(a[1]);case"gotoAndPlay":return g.gotoAndPlay(a[1],a[2]);case"gotoAndStop":return g.gotoAndStop(a[1]);case"stop":return g.stop();case"pause":return g.pause();case"resume":return g.resume();case"update":return g.update(a[1])}}),e.length>1?e:e[0]}}(jQuery,window)}).call(this);